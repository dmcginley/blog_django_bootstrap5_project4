{% extends 'library/base.html' %}
{% block content %}

<div class="p-3 d-flex flex-column align-items-center ">
    {% for post in posts %}
    <!-- this will not show any profile image if the user has no posts -->

    {% if forloop.first %}
    <img src="{{ post.author.profile.image.url }}" class="rounded-circle m-4 mx-auto d-block" height="200" alt="">
    {% endif %}

    {% endfor %}

    <h1 class="text-capitalize mb-2">
        {{ user.kwargs.username }}
    </h1>
    <p class="">Posts by {{ view.kwargs.username }} ({{ page_obj.paginator.count }})</p>
    <a href="{% url 'edit_profile' %}">Edit profile</a>

</div>

{% for post in posts %}
<div class="container mt-4 py-2">
    <article class="container d-flex py-4 bg-light rounded border">
        <img src="{{ post.author.profile.image.url }}" class="rounded-circle me-4" height="86" alt="">
        <div class="text-dark">
            <h1><a class="text-black" href="{% url 'post-detail' post.id %}">{{ post.author }}</a>
            </h1>

            <p class="text-dark">{{ post.content }}</p>
            <small class="text-muted">By

                <!-- TODO: have link to profile page -->
                <a href="{% url 'user-posts' post.author.username %}">{{ post.author }}</a>
                on
                {{ post.date_posted|date:"F dS, Y" }}
            </small>
        </div>
    </article>
</div>
{% if object.author == user %}
<div class="p-2">
    <a class="btn btn-outline-secondary btn-sm ms-3 my-3 d-block d-md-inline"
        href="{% url 'post-update' object.id %}">Update</a>
    <a class="btn btn-outline-muted btn-sm ms-3 my-3 d-block d-md-inline"
        href="{% url 'post-delete' object.id %}">Delete</a>
</div>
{% endif %}

{% endfor %}




{% endblock content %}
